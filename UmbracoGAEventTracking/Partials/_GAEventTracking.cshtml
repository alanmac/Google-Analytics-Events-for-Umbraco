@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@using UmbracoGAEventTracking

<script type="text/javascript" src="~/Scripts/ga-helpers.js"></script>

@{
    var events = new EventHelper(Model.Content).GetEvents();

    if (events != null)
    {
        foreach (Event gaEvent in events)
        {
            <script type="text/javascript">
                window.onload = function () {
                    var elements = document.querySelectorAll('@gaEvent.CssSelector');
                    for (var i = 0; i < elements.length; i++) {
                        elements[i].addEventListener(
                            '@gaEvent.Action',
                            function () {
                                sendGaEvent(
                                    '@gaEvent.Category',
                                    '@gaEvent.Action',
                                    '@gaEvent.Label');
                            });
                    }
                };
            </script>
        }
    }
}